#!/usr/bin/env bash

echo "@swan-js: BUILDING BROWSER MODULES"
echo "------------------------------------------------------------------------------------"
npx webpack --mode production
echo


echo "@swan-js: BUILDING DOCUMENTATION"
echo "------------------------------------------------------------------------------------"

generate-documentation () {
    echo "- docs/$1.md"
    bin/gen-doc "lib/$1.js" > "docs/$1.md"
}

echo "- api.md"
bin/gen-doc index.js > docs/api.md

generate-documentation builtin-functions
generate-documentation stdlib/date
generate-documentation stdlib/http
generate-documentation stdlib/json
generate-documentation stdlib/list
generate-documentation stdlib/math
generate-documentation stdlib/path
generate-documentation stdlib/text
